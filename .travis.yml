language: java
jdk:
- oraclejdk8
script: "./gradlew clean test build"
branches:
  only:
  - master
  - development
sudo: false
before_cache:
- rm -f  $HOME/.gradle/caches/modules-2/modules-2.lock
- rm -fr $HOME/.gradle/caches/*/plugin-resolution/
cache:
  directories:
  - "$HOME/.gradle/caches/"
  - "$HOME/.gradle/wrapper/"
env:
  global:
    secure: WxOJBclFPf0d/LW7V/FGs5FL+2BbQH/RLDEGokLBb4KgThI4mzACpfp8/lXH9dhh8GPKWuNCGDuIz+gMpZQnlijWnHMp0xg9pS5eKwcK38DwXz2UhQjH7mldCFTrYxzG5VmqSwSQTXKNYDP+dVrkrcx/hq6Xt2pzroBYd/n0qpoPLQwjy/tqyLgCVAkF7jDbbn6tkr2n+FhtvU3VEdyDCXnWZDsKQTl+qhEafDrTkTxbtQPhVmv9QYDq0PJgI56tkpcD32zy58T5yQrK84d4IP8yUxf2/wgb3qpbKIt0N0yYx64ibJbLHot/PmBXn71dfmLkYopBa4jWo7rsft9zc7axEdD3pyj/rPmI8RuD1VFMnhHzhyFNm0lFg3Dxgfukngq1aOhzUrck/259nGw6fSIC9HpnRKXNkVZk+IWv/FQKZRs0h3PLDPcbTg3qfLCPlmUo0VhY0jUuKYY1ULl1Ek4ixGqczgRKh7UCIMAk/ckggEvrStylCmtLhKBJYifkP0C1hq8ftaEoqrTCWYEs7kG7zIOYwiaqhFiM+XmQaBzPbf5tUrTEwqDGwtRYTr0nh2LMzgQWfsJiTeGEqg2eXeaJs/f3YtKebc/K+Lmp08zRPqNIuLvAjDmH0JMacOiOGgAf44uscpuWFKL3twnUA9Yum+kbI1+L+3ssK4PI2Cw=
before_install:
- echo $GMAIL_GPG | gpg --decrypt --passphrase-fd 0 .buildscript/gradle.properties.gpg
  > ~/.gradle/gradle.properties
after_success:
- "./buildscript/snapshot.sh"
